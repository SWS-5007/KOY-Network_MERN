import React, {
  FC,
  useState,
  useEffect,
  Dispatch,
  SetStateAction,
} from "react";
import axios from "axios";

import { Box, Typography, Divider, IconButton } from "@mui/material";
import MenuItem from "@mui/material/MenuItem";
import Select, { SelectChangeEvent } from "@mui/material/Select";

import { CountryAutocomplete } from "../../MuiComponents/CountryAutocomplete";
import { setProfile, useAppDispatch } from "src/store";
import { isValidEmail } from "src/hook/isValidEmail";

import "./styles.css";
import "./m.styles.css";

interface Props {
  currentUserData: any;
  setCurrentUserData: Dispatch<SetStateAction<any>>;
  // handleRegister: () => void;
}

interface ErrorProps {
  value: boolean | string;
  errorMsg: string;
}

const statusIcons = (status: string) => {
  if (status === "sent") {
    return (
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
        <path
          d="M2.61022 3.5738C2.80761 3.23189 2.69047 2.7947 2.34856 2.5973C2.00666 2.39991 1.56947 2.51705 1.37207 2.85895C1.17467 3.20086 1.29182 3.63805 1.63372 3.83545C1.97563 4.03285 2.41282 3.9157 2.61022 3.5738Z"
          fill="#2B2C2F"
        />
        <path
          d="M4.1347 2.0482C4.4766 1.85081 4.59375 1.41361 4.39635 1.07171C4.19895 0.729805 3.76176 0.61266 3.41985 0.810059C3.07795 1.00746 2.9608 1.44465 3.1582 1.78655C3.3556 2.12846 3.79279 2.2456 4.1347 2.0482Z"
          fill="#2B2C2F"
        />
        <path
          d="M5.20898 2.86084V5.36279C5.20898 5.74197 5.35961 6.10561 5.62773 6.37373C5.89585 6.64185 6.25949 6.79248 6.63867 6.79248H8.7832V5.36279H6.63867V2.86084H5.20898Z"
          fill="#2B2C2F"
        />
        <path
          d="M6.28125 0H5.5664V1.42969H6.28125C7.12954 1.42969 7.95879 1.68124 8.66412 2.15252C9.36946 2.62381 9.9192 3.29367 10.2438 4.0774C10.5685 4.86112 10.6534 5.72351 10.4879 6.5555C10.3224 7.3875 9.91391 8.15174 9.31407 8.75157C8.71424 9.35141 7.95 9.7599 7.118 9.9254C6.28601 10.0909 5.42362 10.006 4.6399 9.68132C3.85617 9.3567 3.18631 8.80696 2.71502 8.10162C2.24374 7.39629 1.99219 6.56704 1.99219 5.71875V5.0039H0.5625V5.71875C0.5625 6.84981 0.897899 7.95547 1.52628 8.89591C2.15467 9.83636 3.04781 10.5693 4.09278 11.0022C5.13774 11.435 6.28759 11.5483 7.39692 11.3276C8.50625 11.107 9.52523 10.5623 10.325 9.76252C11.1248 8.96273 11.6695 7.94375 11.8901 6.83442C12.1108 5.72509 11.9975 4.57524 11.5647 3.53028C11.1318 2.48531 10.3989 1.59217 9.45841 0.963783C8.51797 0.335399 7.41231 0 6.28125 0Z"
          fill="#2B2C2F"
        />
      </svg>
    );
  } else if (status === "confirmed") {
    return (
      <svg width="13" height="13" viewBox="0 0 13 13" fill="none">
        <path
          d="M6.5 0C5.21442 0 3.95772 0.381218 2.8888 1.09545C1.81988 1.80968 0.986755 2.82484 0.494786 4.01256C0.00281636 5.20028 -0.125905 6.50721 0.124899 7.76809C0.375702 9.02896 0.994767 10.1872 1.90381 11.0962C2.81285 12.0052 3.97104 12.6243 5.23191 12.8751C6.49279 13.1259 7.79972 12.9972 8.98744 12.5052C10.1752 12.0132 11.1903 11.1801 11.9046 10.1112C12.6188 9.04228 13 7.78558 13 6.5C13 4.77609 12.3152 3.12279 11.0962 1.90381C9.87721 0.684819 8.22391 0 6.5 0ZM10.9791 4.35697L5.30243 10.0455C5.28402 10.0637 5.26219 10.0782 5.2382 10.088C5.2142 10.0978 5.1885 10.1027 5.16258 10.1026C5.13665 10.1027 5.11096 10.0978 5.08696 10.088C5.06296 10.0782 5.04113 10.0637 5.02273 10.0455L2.02091 7.03379C1.9862 6.99567 1.96781 6.94546 1.9697 6.89394C1.96981 6.86788 1.97509 6.8421 1.98523 6.81809C1.99537 6.79409 2.01018 6.77233 2.02879 6.75409L3.14167 5.63924C3.15998 5.62078 3.18176 5.60613 3.20577 5.59613C3.22977 5.58613 3.25552 5.58098 3.28152 5.58098C3.30752 5.58098 3.33326 5.58613 3.35727 5.59613C3.38127 5.60613 3.40306 5.62078 3.42137 5.63924L5.17046 7.3903L9.58652 2.96439C9.60483 2.94593 9.62661 2.93128 9.65061 2.92128C9.67462 2.91128 9.70036 2.90613 9.72637 2.90613C9.75237 2.90613 9.77811 2.91128 9.80211 2.92128C9.82612 2.93128 9.8479 2.94593 9.86621 2.96439L10.9791 4.07924C11.0158 4.11615 11.0364 4.16607 11.0364 4.21811C11.0364 4.27014 11.0158 4.32006 10.9791 4.35697Z"
          fill="#2B2C2F"
        />
      </svg>
    );
  } else if (status === "processing") {
    return (
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
        <path
          d="M11.8963 7.30059C10.9949 6.94366 10.6697 6.6002 10.6697 5.99968C10.6697 5.39916 10.9949 5.05571 11.8964 4.69878C11.9688 4.66998 12.0146 4.58638 11.9958 4.51079C11.8458 3.90453 11.6063 3.33388 11.2921 2.81323C11.2519 2.74656 11.1603 2.71963 11.0887 2.75056C10.1992 3.13535 9.7265 3.12242 9.30209 2.69789C8.87754 2.27337 8.86461 1.80072 9.24929 0.91127C9.28009 0.839671 9.25316 0.748207 9.18635 0.707941C8.6658 0.393682 8.09512 0.154221 7.48897 0.00422445C7.41337 -0.0145751 7.32963 0.0312905 7.30097 0.103689C6.94389 1.00487 6.60055 1.33006 6 1.33006C5.39945 1.33006 5.05597 1.00487 4.69916 0.103689C4.67049 0.0312905 4.58689 -0.0145751 4.51115 0.00422445C3.905 0.154221 3.33419 0.393682 2.81337 0.707941C2.7467 0.748207 2.71977 0.839671 2.7507 0.91127C3.13551 1.80072 3.12258 2.27337 2.6979 2.69789C2.27349 3.12242 1.80081 3.13535 0.911318 2.75056C0.839849 2.71963 0.748113 2.74656 0.707979 2.81323C0.393836 3.33388 0.154229 3.90453 0.00422514 4.51052C-0.0145754 4.58612 0.0312926 4.66998 0.103561 4.69878C1.00505 5.05571 1.3304 5.39916 1.3304 5.99968C1.3304 6.6002 1.00519 6.94366 0.103695 7.30059C0.0314259 7.32925 -0.0144421 7.41312 0.00435847 7.48885C0.154363 8.09497 0.393836 8.66562 0.707979 9.18628C0.74838 9.25294 0.839849 9.27987 0.911318 9.24894C1.80081 8.86415 2.27349 8.87708 2.6979 9.30161C3.12258 9.72626 3.13551 10.1988 2.7507 11.0885C2.71977 11.16 2.74657 11.2516 2.81337 11.2918C3.33405 11.6061 3.90474 11.8457 4.51089 11.9958C4.58649 12.0145 4.67036 11.9689 4.69903 11.8965C5.05557 10.9945 5.39918 10.6692 5.99986 10.6692C6.60055 10.6692 6.94416 10.9945 7.30097 11.8963C7.32963 11.9687 7.41324 12.0145 7.48884 11.9957C8.09512 11.8455 8.6658 11.6061 9.18662 11.2918C9.25329 11.2516 9.28009 11.16 9.24916 11.0885C8.86434 10.1989 8.87741 9.72626 9.30196 9.30174C9.7265 8.87708 10.1992 8.86415 11.0885 9.24894C11.1601 9.27987 11.2519 9.25294 11.292 9.18628C11.6062 8.66549 11.8455 8.09497 11.9955 7.48885C12.0143 7.41312 11.9687 7.32925 11.8963 7.30059ZM5.99986 8.46643C4.63756 8.46643 3.53313 7.36192 3.53313 5.99968C3.53313 4.63745 4.63756 3.53294 5.99986 3.53294C7.36217 3.53294 8.4666 4.63745 8.4666 5.99968C8.4666 7.36192 7.36217 8.46643 5.99986 8.46643Z"
          fill="#2B2C2F"
        />
      </svg>
    );
  } else if (status === "purchased") {
    return (
      <svg width="11" height="11" viewBox="0 0 11 11" fill="none">
        <path
          d="M10.9892 3.98236C10.9758 3.93994 10.9494 3.90286 10.9136 3.87649C10.8778 3.85011 10.8345 3.8358 10.79 3.83562H6.89944L5.70878 0.144168C5.69499 0.102229 5.66832 0.0657128 5.63256 0.0398251C5.5968 0.0139374 5.55378 0 5.50964 0C5.46549 0 5.42247 0.0139374 5.38671 0.0398251C5.35095 0.0657128 5.32428 0.102229 5.3105 0.144168L4.09888 3.84191H0.208281C0.164098 3.84219 0.121134 3.85643 0.0855246 3.88259C0.0499153 3.90875 0.0234817 3.94549 0.0099986 3.98756C-0.00348446 4.02964 -0.00332745 4.0749 0.0104472 4.11688C0.0242219 4.15886 0.0509097 4.19542 0.0866995 4.22133L3.23104 6.50831L2.0299 10.2061C2.01627 10.2484 2.01644 10.2939 2.03038 10.3361C2.04432 10.3783 2.07132 10.415 2.10746 10.4408C2.14317 10.4666 2.18607 10.4804 2.23009 10.4804C2.27411 10.4804 2.31702 10.4666 2.35272 10.4408L5.49706 8.15595L8.6414 10.4408C8.6771 10.4666 8.72001 10.4804 8.76403 10.4804C8.80805 10.4804 8.85096 10.4666 8.88666 10.4408C8.92281 10.415 8.9498 10.3783 8.96374 10.3361C8.97768 10.2939 8.97785 10.2484 8.96422 10.2061L7.76518 6.50831L10.9095 4.22133C10.9469 4.19551 10.9749 4.15824 10.9892 4.11514C11.0036 4.07204 11.0036 4.02544 10.9892 3.98236Z"
          fill="#2B2C2F"
        />
      </svg>
    );
  }
};

export const TransactionHistory: FC<Props> = ({
  currentUserData,
  setCurrentUserData,
}) => {
  const dispatch = useAppDispatch();
  const [NewUserData, setNewUserData] = useState<any | null>(null);

  const [error, setError] = useState<ErrorProps>({
    value: false,
    errorMsg: "",
  });

  const handleConnectWallet = () => {};

  return (
    <Box className="tandp-list-content-history">
      <Box className="tandp-history-wrapper">
        <Box className="content-title">
          <Typography variant="body1" className="content-title-1">
            Transaction History
          </Typography>

          <Typography variant="body1" className="content-title-2">
            Review, Reflect, Revisit Your Financial Moves
          </Typography>
        </Box>

        <Box className="content-main">
          <Box className="history-table-wrapper">
            <Box className="table-header">
              <Box className="header-status" sx={{ width: "25%" }}>
                Status
              </Box>
              <Box className="header-usdt" sx={{ width: "10%" }}>
                USDT
              </Box>
              <Box className="header-koyn" sx={{ width: "10%" }}>
                KOYN
              </Box>
              <Box className="header-sent" sx={{ width: "25%" }}>
                Sent
              </Box>
              <Box className="header-tx_number" sx={{ width: "30%" }}>
                Tx Number
              </Box>
            </Box>

            <Box className="table-body">
              <Box className="every-tx">
                <Box className="body-status" sx={{ width: "25%" }}>
                  <Box className="status-box sent-status">
                    {statusIcons("sent")}
                    <span style={{ color: "black" }}>USDT SENT</span>
                  </Box>
                </Box>

                <Box className="body-usdt" sx={{ width: "10%" }}>
                  5000
                </Box>

                <Box className="body-koyn" sx={{ width: "10%" }}>
                  5000
                </Box>

                <Box className="body-sent" sx={{ width: "25%" }}>
                  9 Aug 23 - 10:45am
                </Box>

                <Box
                  className="body-tx_number"
                  sx={{
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "space-between",
                    width: "30%",
                  }}
                >
                  <span>tx_87wr9esdf789s798fd</span>

                  <IconButton>
                    <svg width="9" height="9" viewBox="0 0 9 9" fill="none">
                      <path
                        d="M6.22704 2.77514V0H0V6.22486H2.77323V9H9V2.77514H6.22704ZM1.15054 5.07462V1.15027H5.07651V2.77514H2.77323V5.07461L1.15054 5.07462ZM7.84946 7.84977H3.92403V3.92543H7.84946V7.84977Z"
                        fill="#8C8C8C"
                      />
                    </svg>
                  </IconButton>
                </Box>
              </Box>
            </Box>
          </Box>
        </Box>
      </Box>

      <Divider
        sx={{
          position: "relative",
          width: "calc(100% + 40px)",
          left: "-20px",
          backgroundColor: "white",
          margin: "20px 0px",
        }}
      />

      <Box className="tandp-history-btns">
        <button onClick={() => handleConnectWallet()}>Get Update</button>
      </Box>
    </Box>
  );
};
